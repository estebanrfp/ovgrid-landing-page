(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{341:function(e,t,n){"use strict";n.r(t);var o=n(7),r=n(335),a=n(93);function i(e,t,n,o,r,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(o,r)}var l=a.a.user();function c(e,t,n){l.auth(e,t,function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.err?(n.color="red",n.text=t.err):(window.localStorage.setItem("sea",JSON.stringify(t.sea)),n.color="green",n.text="welcome ".concat(t.put.alias),setTimeout((function(){return window.loading()}),1e3));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function l(e){i(a,o,r,l,c,"next",e)}function c(e){i(a,o,r,l,c,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}())}l.recall({sessionStorage:!0});t.default=function(e){e.createDefaultEnvironment({skyboxSize:300}).setMainColor(new o.Color3(.005,.005,.005));var t=new r.AdvancedDynamicTexture.CreateFullscreenUI("UI"),n=new r.StackPanel;t.addControl(n);var i=r.Button.CreateSimpleButton("btn","REGISTER / LOGIN");i.color="cyan",i.alpha=".5",i.width=.2,i.maxWidth=.2,i.height="40px",i.paddingTop="5px",n.addControl(i);var d=new r.InputText;d.width=.2,d.maxWidth=.2,d.height="40px",d.placeholderText="username",d.placeholderColor="gray",d.color="cyan",d.alpha=".5",d.paddingTop="5px",n.addControl(d);var u=new r.InputPassword;u.width=.2,u.maxWidth=.2,u.height="40px",u.placeholderText="password",u.placeholderColor="gray",u.color="cyan",u.alpha=".5",u.paddingTop="5px",n.addControl(u);var s=new r.InputPassword;s.width=.2,s.maxWidth=.2,s.height="40px",s.placeholderText="repeat password",s.placeholderColor="gray",s.color="cyan",s.alpha=".5",s.paddingTop="5px",n.addControl(s);var p=r.Button.CreateSimpleButton("btn","LOGIN");p.color="cyan",u.alpha=".5",p.width=.2,p.maxWidth=.2,p.height="40px",p.paddingTop="5px",n.addControl(p);var h=new r.TextBlock("textblock","");h.width=.2,h.height="40px",h.color="cyan",n.addControl(h),new o.HemisphericLight("light",new o.Vector3(0,1,0),e).intensity=.7;var x=o.Mesh.CreateSphere("sphere",16,2,e);x.position.y=1;var w=new o.StandardMaterial("texture1",e);w.alpha=0,x.material=w,n.linkWithMesh(x),n.linkOffsetY=-50;var f=new r.VirtualKeyboard.CreateDefaultLayout;return f.verticalAlignment=r.Control.VERTICAL_ALIGNMENT_BOTTOM,n.addControl(f),f.connect(d),f.connect(u),f.connect(s),d.onBeforeKeyAddObservable.add((function(e){e.currentKey})),s.onTextChangedObservable.add((function(){u.text===s.text?(u.color="green",s.color="green",p.isEnabled=!0):(u.color="cyan",s.color="red",p.isEnabled=!1)})),p.onPointerClickObservable.add((function(){"LOGIN"===p.textBlock.text?c(d.text,u.text,h):function(e,t,n,o){e&&t&&function(e,t){return e===t}(t,n)&&l.create(e,t,(function(n){if(n.err)o.color="red",o.text=n.err;else{o.color="green",o.text="success";var r={color:16777215*Math.random(),id:e,username:e,room:"default",isOnline:!0,x:0,y:20,z:0,rot:Math.PI,state:"idle"};a.a.get("users").get(e).put(r),l.auth(e,t,(function(){o.text="welcome ".concat(e),setTimeout((function(){return window.loading()}),1e3)}))}}))}(d.text,u.text,s.text,h)})),i.onPointerClickObservable.add((function(){"LOGIN"===p.textBlock.text?(p.textBlock.text="REGISTER",n.addControl(s)):(p.textBlock.text="LOGIN",n.removeControl(s))})),e}}}]);
//# sourceMappingURL=keyboard.4086a02e00dd5ca53e6d.js.map